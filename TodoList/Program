using System;
using System.IO;
using System.Text.Json;
using System.Collections.Generic;

class TodoItem{
    public string? Description { get; set; }
    public bool Done { get; set; }
}

class Program{
    static List<TodoItem> todoItems = new();

    static void Main(string[] args){
        Console.WriteLine("Welcome to Todo CLI! You have " + todoItems.Count + " tasks to do");

        while(true){
            Console.Write("\nEnter command (add, list, remove, exit)");
            var input = Console.ReadLine()?.Trim();

            switch(input){
                case "add":
                    AddItem();
                    break;
                
                case "list":
                    ListItems();
                    break;

                case "remove":
                    RemoveItem();
                    break;

                case "exit":
                    return;

                default:
                    Console.WriteLine("Unknown Command, try again");
                    break;
            }
        }
    }

    static void AddItem(){
        Console.Write("Enter task description: ");
        var desc = Console.ReadLine()?.Trim();
        if(!string.IsNullOrEmpty(desc)){
            todoItems.Add(new TodoItem{Description = desc, Done = false});
            Console.WriteLine("Task Added");
        }
    }

    static void ListItems(){
        if(todoItems.Count == 0){
            Console.WriteLine("No tasks found");
            return;
        }
        Console.WriteLine("\nTodo List: ");
        for(int i = 0; i < todoItems.Count; i++){
            var item = todoItems[i];
            Console.WriteLine($"{i + 1}. [{(item.Done ? "X" : " ")}] {item.Description}");
        }
    }

    static void RemoveItem(){
        Console.Write("Enter task number to remove: ");
        if(int.TryParse(Console.ReadLine(), out int index)){
            if(index >= 1 && index <= todoItems.Count){
                todoItems.RemoveAt(index - 1);
                Console.WriteLine("Task removed.");
            }
        }
        else{
            Console.WriteLine("Invalid task number");
        }
    }
}
